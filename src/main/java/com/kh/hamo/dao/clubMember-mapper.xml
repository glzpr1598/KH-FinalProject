<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">    
<mapper namespace="com.kh.hamo.dao.ClubMemberInter">

	<!-- 특정 동호회의 멤버 리스트 가져오기 -->
	<select id="clubMemberList" resultType="HashMap">
		SELECT M.member_id, cj.clubjoin_nickname, M.member_email, M.member_phone, cj.clubjoin_id, C.club_id 
			FROM club C
		    JOIN clubjoin cj
		    ON C.club_id = cj.club_id
		    JOIN MEMBER M
		    ON cj.member_id = M.member_id
		    WHERE C.club_id = #{param1}
		    ORDER BY cj.clubjoin_id DESC
	</select>
	
	<!-- 특정 동호회가입 아이디로 멤버 강퇴 -->
	<delete id="clubMemberFire">
		DELETE FROM clubjoin WHERE clubjoin_id = #{param1}
	</delete>
	
	<!-- 블랙리스트 추가 -->
	<insert id="clubMemberBlacklist">
		INSERT INTO blacklist(blacklist_id, club_id, member_id)
    		VALUES(seq_blacklist_id.NEXTVAL, #{param1}, #{param2})
	</insert>
	
	<!-- 동호회 가입 여부 확인 -->
	<select id="memberCheck" resultType="int">
		SELECT COUNT(*) FROM clubjoin
    		WHERE member_id = #{param1} AND club_id = #{param2} 
	</select>
	
	<!-- 회장 여부 확인 -->
	<select id="masterCheck" resultType="int">
		SELECT COUNT(*) FROM club
   			WHERE member_id = #{param1} AND club_id = #{param2}
	</select>
	
</mapper>